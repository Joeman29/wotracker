(function(){var t,e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};WOTracker.Views.SegmentsIndex=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.tagName="ul",o.prototype.template=JST["segments/index"],o.prototype.events={sortupdate:"newSort"},o.prototype.initialize=function(){return this.collection.on("add",this.addSegment,this)},o.prototype.render=function(){var t,e,n,o;for($(this.el).html(this.template()),o=this.collection.models,e=0,n=o.length;n>e;e++)t=o[e],$(this.el).append(t.view.render().el);return this.$el.sortable(),this.delegateEvents(),this},o.prototype.addSegment=function(t){return this.$el.append(t.view.render().el)},o.prototype.newSort=function(){var t,e,n,o,r,i,s;for(t=1,s=this.$el.find("li:not(.jquery-ui-placeholder)"),r=0,i=s.length;i>r;r++)e=s[r],n=parseInt($($(e).find(".segment-position")).text()),o=this.collection.at(n-1),o.set("position",t),t++;return this.collection.sort(),this.render()},o}(Backbone.View)}).call(this);